
<!-- <div class="category-section">
<div class="accordion" id="accordionExample">
  <div class="card">
    <div class="card-header" id="headingOne">
      <h1 class="mb-0">
        <button class="btn btn-block text-left" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
          Category 1
        </button>
      </h1>
    </div>

    <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordionExample">
      <div class="card-body">
        <div class="subcategory-list">
            <ul class="list-group">
                <a href="#"><li class="list-group-item d-flex justify-content-between align-items-center">
                    Sub Category 1.1
                    <span class="badge badge-primary badge-pill">12</span>
                </li></a>
                <a href="#"><li class="list-group-item d-flex justify-content-between align-items-center">
                    Sub Category 1.2
                    <span class="badge badge-primary badge-pill">50</span>
                </li></a>
                <a href="#"><li class="list-group-item d-flex justify-content-between align-items-center">
                    Sub Category 1.3
                    <span class="badge badge-primary badge-pill">99</span>
                </li></a>
            </ul>  
        </div>
        




      </div>
    </div>
  </div>
  <div class="card">
    <div class="card-header" id="headingTwo">
      <h2 class="mb-0">
        <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
            Category 2
        </button>
      </h2>
    </div>
    <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
      <div class="card-body">


      <div class="subcategory-list">
            <ul class="list-group">
                <a href="#"><li class="list-group-item d-flex justify-content-between align-items-center">
                    Sub Category 2.1
                    <span class="badge badge-primary badge-pill">12</span>
                </li></a>
                <a href="#"><li class="list-group-item d-flex justify-content-between align-items-center">
                    Sub Category 2.2
                    <span class="badge badge-primary badge-pill">50</span>
                </li></a>
                <a href="#"><li class="list-group-item d-flex justify-content-between align-items-center">
                    Sub Category 2.3
                    <span class="badge badge-primary badge-pill">99</span>
                </li></a>
            </ul>  
        </div>


      </div>
    </div>
  </div>
  <div class="card">
    <div class="card-header" id="headingThree">
      <h2 class="mb-0">
        <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
            Category 3
        </button>
      </h2>
    </div>
    <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordionExample">
      <div class="card-body">
      <div class="subcategory-list">
            <ul class="list-group">
                <a href="#"><li class="list-group-item d-flex justify-content-between align-items-center">
                    Sub Category 3.1
                    <span class="badge badge-primary badge-pill">12</span>
                </li></a>
                <a href="#"><li class="list-group-item d-flex justify-content-between align-items-center">
                    Sub Category 3.2
                    <span class="badge badge-primary badge-pill">50</span>
                </li></a>
                <a href="#"><li class="list-group-item d-flex justify-content-between align-items-center">
                    Sub Category 3.3
                    <span class="badge badge-primary badge-pill">99</span>
                </li></a>
            </ul>  
        </div>
      </div>
    </div>
  </div>
  <div class="card">
    <div class="card-header" id="headingFour">
      <h2 class="mb-0">
        <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#collapseFour" aria-expanded="true" aria-controls="collapseOne">
          Category 4
        </button>
      </h2>
    </div>

    <div id="collapseFour" class="collapse" aria-labelledby="headingFour" data-parent="#accordionExample">
      <div class="card-body">
      <div class="subcategory-list">
            <ul class="list-group">
                <a href="#"><li class="list-group-item d-flex justify-content-between align-items-center">
                    Sub Category 4.1
                    <span class="badge badge-primary badge-pill">12</span>
                </li></a>
                <a href="#"><li class="list-group-item d-flex justify-content-between align-items-center">
                    Sub Category 4.2
                    <span class="badge badge-primary badge-pill">50</span>
                </li></a>
                <a href="#"><li class="list-group-item d-flex justify-content-between align-items-center">
                    Sub Category 4.3
                    <span class="badge badge-primary badge-pill">99</span>
                </li></a>
            </ul>  
        </div>
      </div>
    </div>
  </div>
  <div class="card">
    <div class="card-header" id="heading5">
      <h1 class="mb-0">
        <button class="btn btn-block text-left" type="button" data-toggle="collapse" data-target="#collapse5" aria-expanded="false" aria-controls="collapse5">
          Category 5
        </button>
      </h1>
    </div>

    <div id="collapse5" class="collapse" aria-labelledby="heading5" data-parent="#accordionExample">
      <div class="card-body">
      <ul class="list-group">
      <div class="subcategory-list">
            <ul class="list-group">
                <a href="#"><li class="list-group-item d-flex justify-content-between align-items-center">
                    Sub Category 5.1
                    <span class="badge badge-primary badge-pill">12</span>
                </li></a>
                <a href="#"><li class="list-group-item d-flex justify-content-between align-items-center">
                    Sub Category 5.2
                    <span class="badge badge-primary badge-pill">50</span>
                </li></a>
                <a href="#"><li class="list-group-item d-flex justify-content-between align-items-center">
                    Sub Category 5.3
                    <span class="badge badge-primary badge-pill">99</span>
                </li></a>
            </ul>  
        </div>
      </div>
    </div>
  </div>
  <div class="card">
    <div class="card-header" id="heading6">
      <h2 class="mb-0">
        <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapse6" aria-expanded="false" aria-controls="collapse6">
            Category 6
        </button>
      </h2>
    </div>
    <div id="collapse6" class="collapse" aria-labelledby="heading6" data-parent="#accordionExample">
      <div class="card-body">
      <div class="subcategory-list">
            <ul class="list-group">
                <a href="#"><li class="list-group-item d-flex justify-content-between align-items-center">
                    Sub Category 6.1
                    <span class="badge badge-primary badge-pill">12</span>
                </li></a>
                <a href="#"><li class="list-group-item d-flex justify-content-between align-items-center">
                    Sub Category 6.2
                    <span class="badge badge-primary badge-pill">50</span>
                </li></a>
                <a href="#"><li class="list-group-item d-flex justify-content-between align-items-center">
                    Sub Category 6.3
                    <span class="badge badge-primary badge-pill">99</span>
                </li></a>
            </ul>  
        </div>
      </div>
    </div>
  </div>
  <div class="card">
    <div class="card-header" id="headingThree">
      <h2 class="mb-0">
        <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapse7" aria-expanded="false" aria-controls="collapse7">
            Category 7
        </button>
      </h2>
    </div>
    <div id="collapse7" class="collapse" aria-labelledby="heading7" data-parent="#accordionExample">
      <div class="card-body">
      <div class="subcategory-list">
            <ul class="list-group">
                <a href="#"><li class="list-group-item d-flex justify-content-between align-items-center">
                    Sub Category 7.1
                    <span class="badge badge-primary badge-pill">12</span>
                </li></a>
                <a href="#"><li class="list-group-item d-flex justify-content-between align-items-center">
                    Sub Category 7.2
                    <span class="badge badge-primary badge-pill">50</span>
                </li></a>
                <a href="#"><li class="list-group-item d-flex justify-content-between align-items-center">
                    Sub Category 7.3
                    <span class="badge badge-primary badge-pill">99</span>
                </li></a>
            </ul>  
        </div>
      </div>
    </div>
  </div>
  <div class="card">
    <div class="card-header" id="heading8">
      <h2 class="mb-0">
        <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#collapse8" aria-expanded="false" aria-controls="collapse8">
          Category 8
        </button>
      </h2>
    </div>

    <div id="collapse8" class="collapse" aria-labelledby="heading8r" data-parent="#accordionExample">
      <div class="card-body">
      <div class="subcategory-list">
            <ul class="list-group">
                <a href="#"><li class="list-group-item d-flex justify-content-between align-items-center">
                    Sub Category 8.1
                    <span class="badge badge-primary badge-pill">12</span>
                </li></a>
                <a href="#"><li class="list-group-item d-flex justify-content-between align-items-center">
                    Sub Category 8.2
                    <span class="badge badge-primary badge-pill">50</span>
                </li></a>
                <a href="#"><li class="list-group-item d-flex justify-content-between align-items-center">
                    Sub Category 8.3
                    <span class="badge badge-primary badge-pill">99</span>
                </li></a>
            </ul>  
        </div>
      </div>
    </div>
  </div>
</div>
</div> -->

<div class="category-section">
<div class="accordion" id="accordionExample">



<?php
   $servername = "localhost";
   $username = "Shahadat";
   $password = "12345";
   $dbname = "e_library";
   // Create connection
   $conn = new mysqli($servername, $username, $password, $dbname);
   //Check connection
   if (!$conn) {
       die("Connection failed: " . mysqli_connect_error());
   }
   else{
    $sql = 'SELECT DISTINCT main_category FROM books_list where approved="1"';
            $result = mysqli_query($conn, $sql);
            //$result = $conn->query($sql) or die($conn->error);
            //if (mysqli_num_rows($result) > 0) {
            $collaps_id = 0;
            if(!$result || mysqli_num_rows($result)>0){
                while($row = $result->fetch_assoc()){
                    $book_category = $row['main_category'];

                    echo '<div class="card">';
                    echo '<div class="card-header" id="heading'.$collaps_id.'">';
                    echo '<h1 class="mb-0">';
                    echo '<button class="btn btn-block text-left d-flex justify-content-between align-items-center" type="button" data-toggle="collapse" data-target="#collapse'.$collaps_id.'" aria-expanded="false" aria-controls="collapse'.$collaps_id.'">';
                    echo $book_category;
                    $sql_2 = 'SELECT DISTINCT Category FROM books_list where approved="1" and main_category="'.$book_category.'"';
                    $result_sub = mysqli_query($conn, $sql_2);
                    $num_of_sub_cat = 0;
                    if(!$result_sub || mysqli_num_rows($result_sub)>0){
                        $num_of_sub_cat = mysqli_num_rows($result_sub);
                    }
                    
                    echo '<span class="badge badge-primary badge-pill ">'.$num_of_sub_cat.'</span></button></h1></div>';

                    


                    echo ' <div id="collapse'.$collaps_id.'" class="collapse" aria-labelledby="heading'.$collaps_id.'" data-parent="#accordionExample">
                    <div class="card-body">
                      <div class="subcategory-list"> <ul class="list-group">';
                      

                      $sql_3 = 'SELECT DISTINCT Category, main_category FROM books_list where approved="1" and main_category="'.$book_category.'"';
                      $result_3 = mysqli_query($conn, $sql_3);
                      $num_of_book = 0;
                      if(!$result_3 || mysqli_num_rows($result_3)>0){
                        //$num_of_book = mysqli_num_rows($result_sub_2);
                        //$num_of_book = mysqli_num_rows($result_3);
                        while($sub_category = $result_3->fetch_assoc()){
                          $form_id = $collaps_id.$sub_category['Category'];
                          echo '<form action="show_books_by_category.php" method="POST"  id="'.$form_id.'">';
                          echo '<input type="text" name="books_sub_category" hidden value="'.$sub_category['Category'].'" >';
                          echo '<input type="text" name="books_main_category" hidden value="'.$sub_category['main_category'].'" >';
                          $temp_javaScript  = "document.getElementById('".$form_id."').submit(); return false;";
                          echo '<a href="javascript:{}" onclick="'.$temp_javaScript.'"><li class="list-group-item d-flex justify-content-between align-items-center">';
                          //echo '<a href="#"><li class="list-group-item d-flex justify-content-between align-items-center">';
                          echo $sub_category['Category'];

                          $sql_4 = 'SELECT Category FROM books_list where approved="1" and Category="'.$sub_category['Category'].'" and main_category="'.$sub_category['main_category'].'"';
                          $result_4 = mysqli_query($conn, $sql_4);
                          
                          if(!$result_sub || mysqli_num_rows($result_4)>0){
                              $num_of_book = mysqli_num_rows($result_4);
                          }


                          echo '<span class="badge badge-primary badge-pill">'.$num_of_book.'</span>
                              </li></a></form>';

                        }
                          
                      }

                       echo '</ul></div></div></div></div>';

                $collaps_id = $collaps_id +1;
                }
                
            }
            else{
                echo "<h3>There is no category avilable</h3>";
            }

   }
?>

</div>
</div>